<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Mojolicious, the web in a box</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/this.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/1">
<h1>Mojolicious</h1>

<h2>The web in a box</h2>

<h3>Barcelona.pm</h3>

<h3>28/06/2012</h3></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/2">
<h1>Hello!</h1>

<h2>Diego Kuperman</h2>

<h2>@freekey</h2>

<h3>https://github.com/diegok</h3>

<h3>https://metacpan.org/author/DIEGOK</h3></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content" ref="intro/01_slide/3">
<pre class="sh_perl"><code>use Mojolicious::Lite;

get '/' =&gt; sub { 
  shift-&gt;render( json =&gt; { 
    title    =&gt; 'Mojolicious', 
    subtitle =&gt; [ 
      'The web in a box', 
      'Duct Tape For The HTML5 Web' 
    ],
    where    =&gt; 'Barcelonai.pm',
    when     =&gt; '28/06/2012',
    who      =&gt; 'diegok / @freekey'
  }); 
};

app-&gt;start;</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content bullets incremental" ref="intro/01_slide/4">
<h1>Mojolicious</h1>

<h2>What's in the box?</h2>

<ul>
<li>Full framework (client and server)</li>
<li>Mojo::UserAgent (client)</li>
<li>Mojolicious::Lite (micro)</li>
<li>Mojolicious (full)</li>
<li>No dependencies besides perl 5.10</li>
</ul>
</div>
</div><div class="slide" data-transition="scrollUp"><div class="content bullets incremental" ref="intro/01_slide/5">
<h1>Mojolicious</h1>

<h2>Bleeding edge</h2>

<ul>
<li>Non-blocking events</li>
<li>Concurrent requests</li>
<li>Websockets</li>
<li>IPv6</li>
</ul>
</div>
</div><div class="slide" data-transition="scrollUp"><div class="content bullets incremental" ref="intro/01_slide/6">
<h1>Mojolicious</h1>

<h2>No more than the web in the box</h2>

<ul>
<li>model agnostic</li>
<li>validation agnostic</li>
<li>minimal core</li>
<li>CPAN lover</li>
</ul>
</div>
</div><div class="slide" data-transition="scrollUp"><div class="content bullets incremental" ref="intro/01_slide/7">
<h1>Mojolicious</h1>

<h2>Clean, well tested and well documented code</h2>

<ul>
<li>&lt; 10k LOC</li>
<li>~ 17k lines of tests</li>
<li>~ 9k unit tests</li>
<li>Not a feature until it's well tested</li>
</ul>
</div>
</div><div class="slide" data-transition="fade"><div class="content center" ref="intro/01_slide/8">
<p><img src="./file/intro/sri_fix.png" width="1024" height="634" alt="Sri fixes it"/></p></div>
</div><div class="slide" data-transition="none"><div class="content center" ref="intro/01_slide/9">
<h1>Mojolicious</h1>

<h2>The box</h2>

<p><img src="./file/intro/blocks.png" width="565" height="296" alt="Mojolicious classes"/></p></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content commandline" ref="intro/01_slide/10">
<h1>Install</h1>

<pre><code><code class="command">$ curl get.mojolicio.us | sh</code>
</code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content commandline incremental" ref="intro/01_slide/11">
<h1>Install from CPAN</h1>

<pre><code><code class="command">$ cpanm Mojolicious</code>
<code class="result">--&gt; Working on Mojolicious
Fetching http://www.cpan.org/authors/id/T/TE/TEMPIRE/Mojolicious-2.98.tar.gz ... OK
Configuring Mojolicious-2.98 ... OK
Building and testing Mojolicious-2.98 ... OK
Successfully reinstalled Mojolicious-2.98
1 distribution installed
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/12">
<h1>Client</h1></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/13">
<h1>Mojo::UserAgent</h1>

<h3>Async IO HTTP 1.1</h3>

<h3>WebSocket Client</h3>

<h2>+</h2>

<h1>Mojo::DOM</h1>

<h3>HTML5 DOM parser</h3>

<h3>CSS3 selectors</h3></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/14">
<h1>Mojo::UserAgent</h1>

<pre class="sh_perl"><code>my $ua = Mojo::UserAgent-&gt;new;

# Grab the Mojolicious homepage :)
$ua-&gt;get('http://mojolicio.us')-&gt;res-&gt;body;

# Quick JSON request
$ua-&gt;get('http://search.twitter.com/search.json?q=mojolicious')
   -&gt;res-&gt;json-&gt;{results}[0]{text};</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/15">
<h1>Mojo::UserAgent</h1>

<h2>Scrap!</h2>

<pre class="sh_perl"><code># Mojolicious - Perl real-time web framework
say $ua-&gt;get('mojolicio.us')
       -&gt;res-&gt;dom-&gt;at('title')-&gt;text;</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/16">
<h1>Mojo::UserAgent</h1>

<h2>Scrap!</h2>

<pre class="sh_perl"><code># Scrape the latest headlines
$ua-&gt;get('http://digg.com')-&gt;res
   -&gt;dom('h3.story-item-title &gt; a')
   -&gt;each(sub { say shift-&gt;text });</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/17">
<h1>Mojo::UserAgent</h1>

<h2>Form POST</h2>

<pre class="sh_perl"><code># Form post with exception handling
my $tx = $ua-&gt;post_form(
  'http://search.cpan.org/search' 
   =&gt; { q =&gt; 'mojo' }
);
if (my $res = $tx-&gt;success) { 
  say $res-&gt;body; 
}
else {
  my ($message, $code) = $tx-&gt;error;
  say "Error: $message ($code)";
}</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/18">
<h1>Mojo::UserAgent</h1>

<h2>Parallel requests</h2>

<pre class="sh_perl"><code>my $ua = Mojo::UserAgent-&gt;new;

my $cb = sub { print pop-&gt;res-&gt;body };

$ua-&gt;get('http://mojolicio.us'    =&gt; $cb);
$ua-&gt;get('http://search.cpan.org' =&gt; $cb);

Mojo::IOLoop-&gt;start;</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/19">
<h1>Mojo::UserAgent</h1>

<h2>Blocking parallel requests</h2>

<pre class="sh_perl"><code>my $delay = Mojo::IOLoop-&gt;delay;
for my $url ('mojolicio.us', 'cpan.org') {
  $delay-&gt;begin;
  $ua-&gt;get($url =&gt; sub {
    my ($ua, $tx) = @_;
    $delay-&gt;end(
      $tx-&gt;res-&gt;dom-&gt;at('title')-&gt;text
    );
  });
}
my @titles = $delay-&gt;wait;</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/20">
<h1>Mojo::UserAgent</h1>

<h2>Non-blocking WebSocket connection</h2>

<pre class="sh_perl"><code>$ua-&gt;websocket('ws://ws.org:8787' =&gt; sub {
  my ($ua, $tx) = @_;
  $tx-&gt;on(finish =&gt; sub { say 'WS closed!' });
  $tx-&gt;on(message=&gt; sub {
    my ($tx, $message) = @_;
    say "WebSocket message: $message";
    $tx-&gt;finish;
  });
  $tx-&gt;send('hi there!');
});
Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/21">
<h1>Commandline client</h1>

<h2>mojo get</h2></div>
</div><div class="slide" data-transition="scrollUp"><div class="content commandline incremental" ref="intro/01_slide/22">
<h1>Commandline</h1>

<pre><code><code class="command">$ mojo get http://barcelonaonrails.com</code>
<code class="result">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
...

</code><code class="command">$ mojo get http://barcelonaonrails.com title</code>
<code class="result">&lt;title&gt; Barcelona on Rails&lt;/title&gt;

</code><code class="command">$ mojo get http://barcelonaonrails.com title text</code>
<code class="result"> Barcelona on Rails

</code><code class="command">$ mojo get http://barcelonaonrails.com 'h1 span'</code>
<code class="result">&lt;span&gt;Barcelona on Rails&lt;/span&gt;

</code><code class="command">$ mojo get http://twitter.com/search.json?q=mojo '/completed_in'</code>
<code class="result">0.024
</code></code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content commandline incremental" ref="intro/01_slide/23">
<h1>Commandline</h1>

<pre><code><code class="command">$ mojo get -v http://barcelonaonrails.com title</code>
<code class="result">GET / HTTP/1.1
User-Agent: Mojolicious (Perl)
Content-Length: 0
Host: barcelonaonrails.com

HTTP/1.1 200 OK
Connection: keep-alive
Cache-Control: max-age=0, private, must-revalidate
Status: 200 OK
Transfer-Encoding: chunked
Date: Wed, 20 Jun 2012 21:45:34 GMT
X-UA-Compatible: IE=Edge,chrome=1
ETag: "0d78276580a9f5a5d3d836122902786b"
X-Runtime: 0.034635
Content-Type: text/html; charset=utf-8
Server: nginx

&lt;span&gt;Barcelona on Rails&lt;/span&gt;
</code></code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/24">
<h1>Debug Mojo::UserAgent</h1>

<h2>MOJO_USERAGENT_DEBUG=1</h2></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/25">
<h1>Mojolicious::Lite</h1>

<h2>Microframework / Lite framework</h2>

<h2>Full power!</h2></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/26">
<h1>Mojolicious::Lite</h1>

<ul>
<li>One file</li>
<li>Getting started</li>
<li>Prototyping</li>
<li>Small apps</li>
<li>Embed</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content commandline incremental" ref="intro/01_slide/27">
<h1>Commandline helper</h1>

<pre><code><code class="command">$ mojo generate lite_app hello</code>
<code class="result">  [exist] /mojo_talk/examples
  [write] /mojo_talk/examples/hello
  [chmod] hello 744
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/28">
<h2>hello (1/2)</h2>

<pre class="sh_perl"><code>#!/usr/bin/env perl
use Mojolicious::Lite;

# Documentation browser under "/perldoc"
plugin 'PODRenderer';

get '/' =&gt; sub {
  my $self = shift;
  $self-&gt;render('index');
};

app-&gt;start;

# ...</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/29">
<h2>hello (2/2)</h2>

<pre class="sh_perl"><code>__DATA__

@@ index.html.ep
% layout 'default';
% title 'Welcome';
Welcome to the Mojolicious real-time web framework!

@@ layouts/default.html.ep
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;&lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;&lt;%= content %&gt;&lt;/body&gt;
&lt;/html&gt;</code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content commandline" ref="intro/01_slide/30">
<h1>Routes inspection</h1>

<pre><code><code class="command">$ ./hello routes</code>
<code class="result">/perldoc/*module  *    perldocmodule
/                 GET               
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline incremental" ref="intro/01_slide/31">
<h1>Run</h1>

<pre><code><code class="command">$ morbo hello</code>
<code class="result">Server available at http://*:3000.
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/32">
<h1>Other hello app</h1>

<pre class="sh_perl"><code>#!/usr/bin/env perl
use Mojolicious::Lite;

get '/' =&gt; sub {
    shift-&gt;render( text =&gt; 'Hello World!' )
};
get '/hello/:name' =&gt; \&amp;hello;
post '/hello'      =&gt; \&amp;hello;

sub hello {
    my $self = shift;
    my $name = $self-&gt;param('name');
    $self-&gt;render_text("Hello $name!");
};

app-&gt;start;</code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content commandline" ref="intro/01_slide/33">
<h1>Routes with names</h1>

<pre><code><code class="command">$ ./hello routes</code>
<code class="result">/             GET            
/hello/:name  GET   helloname
/hello        POST  hello
</code></code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/34">
<h1>Route placeholders</h1>

<pre class="sh_perl"><code># all but / and .
get '/:capture/foo' =&gt; \&amp;show;

# all but /
get '/#capture/hello' =&gt; \&amp;show;

# all
get '/hello/*capture' =&gt; \&amp;show;

sub show { shift-&gt;render('groovy') };

__DATA__

@@ groovy.html.ep
Got from route: &lt;%= $capture %&gt;.</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/35">
<h1>HTTP methods</h1>

<pre class="sh_perl"><code>get  '/bye' =&gt; sub { };
post '/bye' =&gt; sub { };

any [qw/get post delete/] =&gt; '/bye' =&gt; sub { 
    shift-&gt;render( text =&gt; 'bye!' ) 
};

any '/baz' =&gt; sub {
    my $self   = shift;
    my $method = $self-&gt;req-&gt;method;
    $self-&gt;render(
      text =&gt; "You called /baz with $method"
    );
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/36">
<h1>Just router helpers</h1>

<pre class="sh_perl"><code>get '/foo/:bar' =&gt; sub {
    my $self = shift;
    my $bar  = $self-&gt;param('bar');
    $self-&gt;render( text =&gt; "Hello $bar!" );
};</code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/37">
<h1>The real mojo</h1>

<pre class="sh_perl"><code>app-&gt;routes-&gt;route('/foo/:bar')
   -&gt;via('get')
   -&gt;to(cb =&gt; sub {
        my $self = shift;
        my $bar  = $self-&gt;param('bar');
        $self-&gt;render( 
            text =&gt; "Hello $bar!" 
        );
   });</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/38">
<h1>Route Constraints</h1>

<pre class="sh_perl"><code># /* (digits)
any '/:foo' =&gt; [foo =&gt; qr/\d+/] =&gt; sub {
    my $self = shift;
    my $foo  = $self-&gt;param('foo');
    $self-&gt;render_text("Got: $foo");
};

# /* (everything else)
any '/:bar' =&gt; [bar =&gt; qr/.*/] =&gt; sub {
    my $self = shift;
    $self-&gt;render_json({ 
      got =&gt; $self-&gt;param('bar') 
    });
};</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/39">
<h1>Optional placeholder</h1>

<h2>with default value</h2>

<pre class="sh_perl"><code># /hello/*
get '/:name' =&gt; {name=&gt;'world!'} =&gt; sub {
    my $self = shift;
    my $name = $self-&gt;param('name');
    $self-&gt;render( text =&gt; "Hello $name" );
};</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/40">
<h1>Conditions</h1>

<pre class="sh_perl"><code># /foo
get '/foo' =&gt; (agent =&gt; qr/Firefox/) 
  =&gt; sub {
  shift-&gt;render(
    text =&gt; 'You are using a cool browser!'
  );
};

# /foo
get '/foo' =&gt; (agent =&gt; qr/Internet Explorer/) 
=&gt; sub {
  shift-&gt;render(
    text =&gt; 'You need to upgrade your browser!'
  );
};</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/41">
<h1>All together...</h1>

<pre class="sh_perl"><code># /everything/*?name=*
get '/everything/:stuff' 
    =&gt; [stuff =&gt; qr/\d+/] 
    =&gt; {stuff =&gt; 23} =&gt; sub {
        shift-&gt;render('welcome');
    };

__DATA__

@@ welcome.html.ep
Stuff is &lt;%= $stuff %&gt;.
Query param name is &lt;%= param 'name' %&gt;.</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/42">
<h1>under</h1>

<pre class="sh_perl"><code>under sub =&gt; {
    # return true or false
};</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/43">
<pre class="sh_perl"><code># Authenticate based on name parameter
under sub {
    my $self = shift;
    my $name = $self-&gt;param('name') || '';
    return 1 if $name eq 'Bender';
    $self-&gt;render('denied');
    return;
};
# GET / (with authentication)
get '/' =&gt; 'index';
app-&gt;start;
__DATA__;

@@ denied.html.ep
You are not Bender, permission denied!

@@ index.html.ep
Hi Bender!</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/44">
<pre class="sh_perl"><code>use Mojolicious::Lite;

# /foo
under '/foo';

# GET /foo/bar
get '/bar' =&gt; sub { 
    shift-&gt;render(text =&gt; 'bar!') 
};

# GET /foo/baz
get '/baz' =&gt; sub { 
    shift-&gt;render(text =&gt; 'baz!') 
};

app-&gt;start;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/45">
<h1>EP Templates</h1></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/46">
<h1>Templates</h1>

<h2>.ep</h2>

<pre class="sh_perl"><code>&lt;% Inline Perl %&gt;
&lt;%= perl expression as "scaped XML" %&gt;
&lt;%== Raw perl expression %&gt;
&lt;%# Comment, useful for debugging %&gt;
% Perl line
%= Perl expression line, XML escaped result
%== Perl expression line, raw result
%# Comment line, useful for debugging</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/47">
<h1>Templates</h1>

<h2>.ep</h2>

<pre class="sh_perl"><code>&lt;% for my $framework (@$frameworks) { %&gt;
    &lt;%= $framework %&gt; by &lt;%= $author %&gt;.
&lt;% } %&gt;

&lt;% while (my ($app, $desc) = each %$hr) { %&gt;
    &lt;%= $app %&gt; is a &lt;%= $description %&gt;.
&lt;% } %&gt;</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content bullets" ref="intro/01_slide/48">
<h1>Template plugins</h1>

<ul>
<li>MojoX::Renderer::TT</li>
<li>MojoX::Renderer::Mason</li>
<li>MojoX::Renderer::Xslate</li>
<li>MojoX::Renderer::Alloy</li>
<li>MojoX::Renderer::YAML</li>
<li>MojoX::Renderer::XSLT</li>
<li>MojoX::Renderer::HAML</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/49">
<h1>Helpers</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/50">
<h1>Mojolicious::Plugin::DefaultHelpers</h1>

<h2>app  config  content</h2>

<h2>content_for  current_route</h2>

<h2>dumper  extends  flash</h2>

<h2>include  layout  memorize</h2>

<h2>param  session  stash</h2>

<h2>title  url_for  url_with</h2></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/51">
<h1>stash, param &amp; dumper</h1>

<pre class="sh_perl"><code>get '/bar' =&gt; sub {
    my $self = shift;
    $self-&gt;stash(one =&gt; 23);
    $self-&gt;render('baz', two =&gt; 24);
};

__DATA__

@@ baz.html.ep
The magic numbers are &lt;%= $one %&gt; and &lt;%= $two %&gt;.
&lt;%= param 'name' %&gt;
&lt;%= stash 'one' %&gt;
&lt;%= dumper [1, 2, 3] %&gt;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/52">
<h1>Mojolicious::Plugin::TagHelpers</h1>

<h2>base_tag check_box file_field</h2>

<h2>form_for hidden_field image input_tag</h2>

<h2>javascript link_to password_field</h2>

<h2>radio_button select_field</h2>

<h2>stylesheet submit_button t tag</h2>

<h2>text_field text_area</h2></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/53">
<h1>Tag Helpers</h1>

<h2>Mojolicous::Plugin::TagHelpers</h2>

<pre class="sh_perl"><code>%= tag 'div';
&lt;%= t 'div', id =&gt; 'foo' %&gt;
&lt;%= t div =&gt; begin %&gt;Content&lt;% end %&gt;

%= image '/images/foo.png', alt =&gt; 'Foo'

&lt;%= javascript 'script.js' %&gt;
&lt;%= stylesheet 'foo.css' %&gt;

&lt;%= form_for login =&gt; begin %&gt;
    %= text_field 'first_name';
    %= check_box employed =&gt; 1, id =&gt; 'foo';
    %= submit_button;
&lt;% end %&gt;</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/54">
<h1>Tag Helpers (cont.)</h1>

<h2>Mojolicous::Plugin::TagHelpers</h2>

<pre class="sh_perl"><code>&lt;%= link_to Home =&gt; 'index' %&gt;

&lt;%= link_to index =&gt; {foo =&gt; 'bar'}, class =&gt; 'links' =&gt; begin %&gt;
  Home
&lt;% end %&gt;

&lt;%= link_to '/file' =&gt; begin %&gt;File&lt;% end %&gt;

&lt;%= link_to url_with-&gt;query([page =&gt; $cur++]) =&gt; begin %&gt;Next&lt;% end %&gt;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/55">
<h1>Helpers creation</h1>

<pre class="sh_perl"><code>helper mydump =&gt; sub {
  my ( $self, @values ) = @_;
  Data::Dumper-&gt;new(\@values)-&gt;Dump;
};</code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/56">
<h1>Plugin creation</h1>

<pre class="sh_perl"><code>package Mojolicious::Plugin::MyDump;
use base 'Mojolicious::Plugin';

sub register {
  my ($self, $app) = @_;

  $app-&gt;helper(mydump =&gt; sub {
    my ( $self, @values ) = @_;
    Data::Dumper-&gt;new(\@values)-&gt;Dump;
  });
}

1;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/57">
<h1>Core plugins</h1>

<h2>are very good examples</h2></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/58">
<h1>Mojolicious::Plugin::Mount</h1>

<pre class="sh_perl"><code># Mojolicious
my $route = $self-&gt;plugin(Mount =&gt; {
  '/prefix' =&gt; '/apps/myapp.pl'
});

# Mojolicious::Lite
my $route = plugin Mount =&gt; {
  '/prefix' =&gt; '/apps/myapp.pl'
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/59">
<h1>Plugins on CPAN</h1>

<p><img src="./file/intro/plugins.png" width="899" height="739" alt="Mojolicious classes"/></p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/60">
<h1>Session</h1>

<h2>Client side</h2>

<h3>Signed cookie</h3></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/61">
<h1>Session</h1>

<pre class="sh_perl"><code>app-&gt;secret('my super secret ftw!');

under sub {
  if ( $self-&gt;session('user') ) {
    return 1;
  }
  elsif ( my $user = $self-&gt;param('u') ) {
    $self-&gt;session(user =&gt; $user);
    return 1;
  }
  return 0;
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/62">
<h1>Commandline / Oneliners</h1>

<h2>ojo</h2></div>
</div><div class="slide" data-transition="scrollUp"><div class="content commandline" ref="intro/01_slide/63">
<h1>ojo.pm</h1>

<h2>Instant lite_app</h2>

<pre><code><code class="command">$ perl -Mojo -e 'a("/" =&gt; {text =&gt; "Hello!"})-&gt;start' daemon</code>
</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content commandline" ref="intro/01_slide/64">
<h1>ojo.pm</h1>

<h2>Instant lite_app</h2>

<pre><code><code class="command">$ perl -Mojo -e 'a("/" =&gt; {text =&gt; "Hello!"})-&gt;start' get /</code>
</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/65">
<h1>ojo.pm</h1>

<pre class="sh_perl"><code>a =&gt; Mojolicious::Lite
b =&gt; Mojo::ByteStream
c =&gt; Mojo::Collection
d =&gt; DELETE
f =&gt; POST form
g =&gt; GET
h =&gt; HEAD
o =&gt; OPTIONS request
p =&gt; POST
t =&gt; PATCH
u =&gt; PUT
x =&gt; Mojo::DOM</code></pre>

<h2>http://mojolicio.us/perldoc?ojo</h2></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/66">
<h1>Async examples</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/67">
<h1>Websockets</h1>

<pre class="sh_perl"><code>websocket '/echo' =&gt; sub {
    my $self = shift;
    $self-&gt;on(message=&gt;sub {
        my ($self, $message) = @_;
        $self-&gt;send_message("echo: $message");
    });
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/68">
<h1>Client inside</h1>

<pre class="sh_perl"><code>use Mojolicious::Lite;

# Scrape information from remote sites
get '/title-from' =&gt; sub {
  my $self = shift;
  my $url  = $self-&gt;param('url')
           || 'http://mojolicio.us';

  $self-&gt;ua-&gt;get($url =&gt; sub {
    my $dom = pop-&gt;res-&gt;dom;
    $self-&gt;render_text(
      $dom-&gt;at('title')-&gt;text
    );
  });
  $self-&gt;render_later;
};

app-&gt;start;</code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/69">
<h1>Mojolicious::Plugin::Proxy</h1>

<pre class="sh_perl"><code>use Mojolicious::Lite;

plugin 'proxy';

get '/' =&gt; sub { 
  shift-&gt;proxy_to('http://mojolicio.us/') 
};

app-&gt;start;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/70">
<h1>Testing</h1>

<h2>Test::Mojo</h2>

<h3>( Mojo::UserAgent + Mojo::DOM )</h3></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/71">
<pre class="sh_perl"><code>use Test::More tests =&gt; 12;
use Test::Mojo;

my $t = Test::Mojo-&gt;new('MyApp');

$t-&gt;get_ok('/welcome')
  -&gt;status_is(200)
  -&gt;text_is('div#message' =&gt; 'Hello!');

$t-&gt;post_form_ok('/search.json' =&gt; {q =&gt; 'Perl'})
  -&gt;status_is(200)
  -&gt;header_is('X-Powered-By' =&gt; 'Mojolicious (Perl)')
  -&gt;header_isnt('X-Bender' =&gt; 'Bite my shiny metal ass!');
  -&gt;json_is('/results/4/title' =&gt; 'Perl rocks!');

$t-&gt;websocket_ok('/echo')
  -&gt;send_ok('hello')
  -&gt;message_is('echo: hello')
  -&gt;finish_ok;</code></pre></div>
</div><div class="slide" data-transition="toss"><div class="content" ref="intro/01_slide/72">
<h1>Mojolicious</h1>

<h2>App</h2></div>
</div><div class="slide" data-transition="scrollUp"><div class="content commandline" ref="intro/01_slide/73">
<pre><code><code class="command">$ mojo generate app MyApp</code>
<code class="result">  [mkdir] /.../my_app/script
  [write] /.../my_app/script/my_app
  [chmod] my_app/script/my_app 744
  [mkdir] /.../my_app/lib
  [write] /.../my_app/lib/MyApp.pm
  [mkdir] /.../my_app/lib/MyApp
  [write] /.../my_app/lib/MyApp/Example.pm
  [mkdir] /.../my_app/t
  [write] /.../my_app/t/basic.t
  [mkdir] /.../my_app/log
  [mkdir] /.../my_app/public
  [write] /.../my_app/public/index.html
  [mkdir] /.../my_app/templates/layouts
  [write] /.../my_app/templates/layouts/default.html.ep
  [mkdir] /.../my_app/templates/example
  [write] /.../my_app/templates/example/welcome.html.ep
</code></code></pre></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/74">
<pre class="sh_perl"><code>.
|-- lib
|   |-- MyApp
|   |   `-- Example.pm
|   `-- MyApp.pm
|-- log
|-- public
|   `-- index.html
|-- script
|   `-- my_app
|-- t
|   `-- basic.t
`-- templates
    |-- example
        |   `-- welcome.html.ep
            `-- layouts
                    `-- default.html.ep</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/75">
<h1>Controller</h1>

<pre class="sh_perl"><code>package MyApp::Example;
use strict;
use warnings;
use base 'Mojolicious::Controller';

# This action will render a template
sub welcome {
    my $self = shift;

    # Render template "example/welcome.html.ep" with message
    $self-&gt;render(message =&gt; 'Welcome perl6!');
}
1;</code></pre>

<h3>lib/MyApp/Example.pm</h3></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/76">
<h1>App context and startup</h1>

<pre class="sh_perl"><code>package MyApp;
use strict; use warnings;
use base 'Mojolicious';

sub startup {
    my $self = shift;
    $self-&gt;plugin('pod_renderer');
    # Routes
    my $r = $self-&gt;routes;
    $r-&gt;route('/welcome')
      -&gt;to('example#welcome', id =&gt; 1);
}
1;</code></pre>

<h3>lib/MyApp.pm</h3></div>
</div><div class="slide" data-transition="none"><div class="content center" ref="intro/01_slide/77">
<h1>Deployment</h1>

<p><img src="./file/intro/hypnotoad.gif" width="480" height="387" alt="Release message on twitter"/></p></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/78">
<h1>Mojo::Server::Hypnotoad</h1>

<p>Mojo::Server::Hypnotoad is a full featured <strong>UNIX optimized</strong> preforking
<strong>non-blocking I/O</strong> HTTP 1.1 and <strong>WebSocket</strong> server built around the very
well tested and reliable Mojo::Server::Daemon with IPv6, TLS, libev and
<strong>hot deployment</strong> support that <strong>just works</strong>.</p></div>
</div><div class="slide" data-transition="scrollUp"><div class="content commandline incremental" ref="intro/01_slide/79">
<h1>All glory to the hypnotoad</h1>

<h2>start</h2>

<pre><code><code class="command">$ hypnotoad hello</code>
</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content commandline incremental" ref="intro/01_slide/80">
<h1>All glory to the hypnotoad</h1>

<h2>Hot restart</h2>

<pre><code><code class="command">$ hypnotoad hello</code>
<code class="result">Starting hot deployment for Hypnotoad server 31912
</code></code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content commandline incremental" ref="intro/01_slide/81">
<h1>All glory to the hypnotoad</h1>

<h2>stop</h2>

<pre><code><code class="command">$ hypnotoad -s hello</code>
<code class="result">Stopping Hypnotoad server 31954 gracefully.
</code></code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="intro/01_slide/82">
<h2>INT, TERM</h2>

<h3>Shutdown server immediately</h3>

<h2>QUIT</h2>

<h3>Shutdown server gracefully.</h3>

<h2>TTIN</h2>

<h3>Increase worker pool by one.</h3>

<h2>TTOU</h2>

<h3>Decrease worker pool by one.</h3>

<h2>USR2</h2>

<h3>Attempt zero downtime software upgrade (hot deployment) without losing any incoming connections.</h3></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/83">
<h1>PSGI</h1>

<h2>Automatic detection</h2></div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01_slide/84">
<h1>Heroku</h1></div>
</div><div class="slide" data-transition="fade"><div class="content commandline incremental" ref="intro/01_slide/85">
<h1>Deploy on Heroku</h1>

<pre><code><code class="command">$ cpanm Mojolicious::Command::generate::heroku</code>
<code class="result">...

</code><code class="command">$ ./my_app deploy heroku -c</code>
<code class="result">...
...
-----&gt; Launching... done, v4
http://pure-love-4.herokuapp.com deployed to Heroku
</code></code></pre></div>
</div><div class="slide" data-transition="toss"><div class="content" ref="intro/01_slide/86">
<h1>Docs, tutorials, community...</h1>

<h2>http://mojolicio.us/perldoc</h2>

<h2>https://github.com/kraih/mojo/wiki</h2>

<h2>http://mojocast.com</h2>

<h2>#mojo on irc.perl.org</h2></div>
</div><div class="slide" data-transition="toss"><div class="content" ref="intro/01_slide/87">
<h1>Questions?</h1>

<p><img src="./file/intro/hypnotoad.gif" width="480" height="387" alt="Release message on twitter"/></p></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="intro/01_slide/88">
<h1>Thank you!</h1></div>
</div></div>

</body>
</html>
